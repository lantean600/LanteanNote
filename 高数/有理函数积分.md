```latex
\documentclass{article}
\usepackage{amsmath, amssymb}
\usepackage{geometry}
\geometry{a4paper, margin=1in}
\title{积分技巧笔记：有理函数积分与示例}
\author{}
\date{}
\begin{document}
\maketitle

\section{有理函数的积分}
有理函数是指两个多项式的商，形式为：
\[
\frac{P(x)}{Q(x)} = \frac{a_0 x^n + a_1 x^{n-1} + \cdots + a_n}{b_0 x^m + b_1 x^{m-1} + \cdots + b_m}
\]
其中，$a_i, b_i$ 为常数，且 $b_0 \neq 0$。

\subsection{真分式与假分式}
\begin{itemize}
    \item 当分子次数 $n$ 小于分母次数 $m$ 时，称为\textbf{真分式}。
    \item 当 $n \geq m$ 时，称为\textbf{假分式}。
\end{itemize}

假分式可以通过多项式除法转化为一个多项式与一个真分式之和。

\subsection{部分分式分解}
在实数范围内，任意多项式 $Q(x)$ 总可以分解为一次因式和二次不可约因式的乘积：
\[
Q(x) = (x - a)^k \cdots (x^2 + px + q)^r
\]
其中，$x^2 + px + q$ 无实根（即判别式 $\Delta = p^2 - 4q < 0$）。

对于真分式 $\frac{P(x)}{Q(x)}$，其部分分式分解形式为：
\[
\frac{P(x)}{Q(x)} = \sum_{i=1}^k \left( \frac{A_{i1}}{(x - a_i)} + \frac{A_{i2}}{(x - a_i)^2} + \cdots + \frac{A_{ik_i}}{(x - a_i)^{k_i}} \right) + \sum_{j=1}^r \left( \frac{M_{j1}x + N_{j1}}{x^2 + p_j x + q_j} + \cdots + \frac{M_{jr_j}x + N_{jr_j}}{(x^2 + p_j x + q_j)^{r_j}} \right)
\]
其中，$A_{i\ell}, M_{j\ell}, N_{j\ell}$ 为待定常数。

\subsection{示例：部分分式分解}
考虑分式 $\frac{x + s}{(x - 1)(x + 2)}$，其中 $s$ 为常数。分解为：
\[
\frac{x + s}{(x - 1)(x + 2)} = \frac{A}{x - 1} + \frac{B}{x + 2}
\]
通分后比较分子：
\[
x + s = A(x + 2) + B(x - 1) = (A + B)x + (2A - B)
\]
得到方程组：
\[
\begin{cases}
A + B = 1 \\
2A - B = s
\end{cases}
\]
解得：
\[
A = \frac{s + 1}{3}, \quad B = \frac{2 - s}{3}
\]

\section{具体积分示例}
\subsection{示例1：$\displaystyle \int \frac{x - 1}{x^2 + x + 1} \, dx$}
\textbf{解法：} 将分子拆分为分母导数形式与常数项的组合。
首先，分母 $x^2 + x + 1$ 的导数为 $2x + 1$。注意到：
\[
x - 1 = \frac{1}{2}(2x + 1) - \frac{3}{2}
\]
因此，
\[
\frac{x - 1}{x^2 + x + 1} = \frac{\frac{1}{2}(2x + 1)}{x^2 + x + 1} - \frac{3}{2} \cdot \frac{1}{x^2 + x + 1}
\]
积分得：
\[
\int \frac{x - 1}{x^2 + x + 1} \, dx = \frac{1}{2} \int \frac{2x + 1}{x^2 + x + 1} \, dx - \frac{3}{2} \int \frac{1}{x^2 + x + 1} \, dx
\]
对于第一项，由于 $d(x^2 + x + 1) = (2x + 1) \, dx$，有：
\[
\int \frac{2x + 1}{x^2 + x + 1} \, dx = \ln |x^2 + x + 1|
\]
对于第二项，完成平方：
\[
x^2 + x + 1 = \left( x + \frac{1}{2} \right)^2 + \left( \frac{\sqrt{3}}{2} \right)^2
\]
所以，
\[
\int \frac{1}{x^2 + x + 1} \, dx = \int \frac{1}{\left( x + \frac{1}{2} \right)^2 + \left( \frac{\sqrt{3}}{2} \right)^2} \, dx = \frac{2}{\sqrt{3}} \arctan \left( \frac{2x + 1}{\sqrt{3}} \right)
\]
综上，
\[
\int \frac{x - 1}{x^2 + x + 1} \, dx = \frac{1}{2} \ln |x^2 + x + 1| - \sqrt{3} \arctan \left( \frac{2x + 1}{\sqrt{3}} \right) + C
\]

\subsection{示例2：$\displaystyle \int \frac{dx}{x(x^4 + 2)}$}
\textbf{解法：} 通过代数变形简化被积函数。
注意到：
\[
\frac{1}{x(x^4 + 2)} = \frac{1}{2} \left( \frac{1}{x} - \frac{x^3}{x^4 + 2} \right)
\]
验证：
\[
\frac{1}{x} - \frac{x^3}{x^4 + 2} = \frac{x^4 + 2 - x^4}{x(x^4 + 2)} = \frac{2}{x(x^4 + 2)}
\]
因此，
\[
\int \frac{dx}{x(x^4 + 2)} = \frac{1}{2} \int \frac{1}{x} \, dx - \frac{1}{2} \int \frac{x^3}{x^4 + 2} \, dx
\]
计算得：
\[
\int \frac{1}{x} \, dx = \ln |x|, \quad \int \frac{x^3}{x^4 + 2} \, dx = \frac{1}{4} \ln |x^4 + 2|
\]
故原积分为：
\[
\int \frac{dx}{x(x^4 + 2)} = \frac{1}{2} \ln |x| - \frac{1}{8} \ln |x^4 + 2| + C
\]

\subsection{示例3：$\displaystyle \int \frac{x^5 \, dx}{(x^2 + 2x + 2)^2}$}
\textbf{解法（思路）：} 此积分较为复杂。一般策略是将分子拆分为与分母相关的多项式组合。由于分母为 $(x^2 + 2x + 2)^2$，可尝试设：
\[
x^5 = (ax + b)(x^2 + 2x + 2)^2 + (cx + d)(x^2 + 2x + 2) + (ex + f)
\]
通过比较系数确定 $a, b, c, d, e, f$，然后将积分拆分为多项与有理真分式之和，再逐项积分。具体计算过程略。

\subsection{示例4：$\displaystyle \int \frac{x}{(x - 1)(x^2 + 1)} \, dx$}
\textbf{解法：} 使用部分分式分解。
设：
\[
\frac{x}{(x - 1)(x^2 + 1)} = \frac{A}{x - 1} + \frac{Bx + C}{x^2 + 1}
\]
通分后比较分子：
\[
x = A(x^2 + 1) + (Bx + C)(x - 1) = (A + B)x^2 + (C - B)x + (A - C)
\]
得到方程组：
\[
\begin{cases}
A + B = 0 \\
C - B = 1 \\
A - C = 0
\end{cases}
\]
解得：
\[
A = \frac{1}{2}, \quad B = -\frac{1}{2}, \quad C = \frac{1}{2}
\]
因此，
\[
\int \frac{x}{(x - 1)(x^2 + 1)} \, dx = \frac{1}{2} \int \frac{1}{x - 1} \, dx - \frac{1}{2} \int \frac{x}{x^2 + 1} \, dx + \frac{1}{2} \int \frac{1}{x^2 + 1} \, dx
\]
计算各项：
\[
\int \frac{1}{x - 1} \, dx = \ln |x - 1|, \quad \int \frac{x}{x^2 + 1} \, dx = \frac{1}{2} \ln |x^2 + 1|, \quad \int \frac{1}{x^2 + 1} \, dx = \arctan x
\]
所以，
\[
\int \frac{x}{(x - 1)(x^2 + 1)} \, dx = \frac{1}{2} \ln |x - 1| - \frac{1}{4} \ln |x^2 + 1| + \frac{1}{2} \arctan x + C
\]

\section{常用积分公式补充}
对于形如 $\int \frac{du}{u^2 + a^2}$ 的积分（$a > 0$）：
\[
\int \frac{du}{u^2 + a^2} = \frac{1}{a} \arctan \left( \frac{u}{a} \right) + C
\]
推导：令 $u = a \tan t$，则 $du = a \sec^2 t \, dt$，$u^2 + a^2 = a^2 \sec^2 t$，于是
\[
\int \frac{du}{u^2 + a^2} = \int \frac{a \sec^2 t}{a^2 \sec^2 t} \, dt = \frac{1}{a} \int dt = \frac{1}{a} t + C = \frac{1}{a} \arctan \left( \frac{u}{a} \right) + C
\]

\end{document}
```

说明：

· 笔记按照有理函数积分理论、具体示例的结构进行组织。
· 对原内容中的错误（如示例1的步骤）进行了修正，并补充了详细推导。
· 示例3由于原内容不完整，仅提供了解题思路。
· 添加了常用积分公式作为补充，以增强实用性。
· 所有数学公式均用LaTeX格式呈现，确保清晰美观。
